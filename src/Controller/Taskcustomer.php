<?php

namespace App\Controller;

use App\Model\TasksCustomerModel;

/**
 * Наследует родительский класс Tasks,
 * перегружает текущие методы отображения
 */
class Taskcustomer extends Tasks
{
    public function __construct()
    {
        parent::__construct();
        $config = include __DIR__ . "/../../config.php";
        $config["table"] = $this->tableName;
        $this->pageSize = $config["page_size"];
        $this->model = new TasksCustomerModel($config);
        $this->model->setUserId($_SESSION['user']['id']);
    }


    /**
     * Показывает таблицу
     * @throws \Exception
     */

    public function actionShow(): void
    {
        parent::actionShow(); // TODO: Change the autogenerated stub
        $this->view->setTemplate("Taskcustomer/show");
    }

    /**
     * Добавляет новую строку
     */

    public function actionAdd(): void
    {
        if ($_POST && array_search("", $_POST) == false && strlen($_POST['discription']) <= 50) {
            parent::actionAdd(); // TODO: Change the autogenerated stub

        } else {
            $this->redirect("?type=Taskcustomer&action=showadd");
        }
    }

//    /**
//     * Показывает страницу для добавления новой строки
//     */
//
//    public function actionShowAdd(): void
//    {
//        parent::actionShowAdd(); // TODO: Change the autogenerated stub
//        $this->view->setTemplate("Taskcustomer/add_edit");
//    }
}


//namespace App\Controller;
//
//use App\Model\TasksCustomerModel;
//
///**
// * Наследует родительский класс Tasks,
// * перегружает текущие методы отображения
// */
//class Taskcustomer extends Tasks
//{
//    public function __construct()
//    {
//        parent::__construct();
//        $config = include __DIR__ . "/../../config.php";
//        $config["table"] = $this->tableName;
//        $this->pageSize = $config["page_size"];
//        $this->model = new TasksCustomerModel($config);
//        $this->model->setUserId($_SESSION['user']['id']);
//    }
//
//    /**
//     * Показывает таблицу
//     * @throws \Exception
//     */
//
//    public function actionShow(): void
//    {
//        parent::actionShow(); // TODO: Change the autogenerated stub
//        $this->view->setTemplate("Taskcustomer/show");
//    }
//
//    /**
//     * Добавляет новую строку
//     */
//
//    public function actionAdd(): void
//    {
//        if ($_POST && array_search("", $_POST) == false && strlen($_POST['discription']) <= 50) {
//            parent::actionAdd(); // TODO: Change the autogenerated stub
//
//        } else {
//            $this->redirect("?type=Taskcustomer&action=showadd");
//        }
//    }
//
//    /**
//     * Показывает страницу для добавления новой строки
//     */
//
//    public function actionShowAdd(): void
//    {
//        parent::actionShowAdd(); // TODO: Change the autogenerated stub
//        $this->view->setTemplate("Taskcustomer/add_edit");
//    }
//}
